{"ast":null,"code":"var _jsxFileName = \"/home/sachin/sem-2-2/DASS/Assignments/A2/2018101108/frontend/src/components/log-in.component.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport { getFromstorage, setInStorage } from '../../src/utils/storage';\nimport { Redirect } from 'react-router-dom';\nexport default class LogInUser extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      username: '',\n      email: '',\n      password: '',\n      role: '',\n      isLoading: true,\n      signinerror: '',\n      token: '',\n      loggedin: false\n    };\n    this.onChangeEmail = this.onChangeEmail.bind(this);\n    this.onChangePassword = this.onChangePassword.bind(this);\n    this.onChangeToken = this.onChangeToken.bind(this);\n    this.onSubmit = this.onSubmit.bind(this);\n  }\n\n  componentDidMount() {\n    const obj = getFromstorage('the_main_app'); // console.log(\"hell yeah!\",obj);\n\n    if (obj && obj.token) {\n      const {\n        token\n      } = obj.token; //verify token\n\n      fetch('http://localhost:4000/api/account/verify?token=' + obj.token).then(res => res.json()).then(json => {\n        // console.log('json',json);\n        if (json.success) {\n          // console.log(\"is this even there?\");\n          this.setState({\n            token,\n            isLoading: false,\n            loggedin: true\n          });\n        } else {\n          // console.log(\"this is not there!\");\n          this.setState({\n            isLoading: false,\n            loggedin: false\n          });\n        }\n      });\n    } else {\n      this.setState({\n        isLoading: false,\n        loggedin: false\n      });\n    }\n\n    console.log(this.state);\n  }\n\n  onChangeEmail(event) {\n    this.setState({\n      email: event.target.value\n    });\n  }\n\n  onChangePassword(event) {\n    this.setState({\n      password: event.target.value\n    });\n  }\n\n  onChangeToken(event) {\n    this.setState({\n      token: event.target.value\n    });\n  }\n\n  onSubmit(e) {\n    const loggedin = this.state.loggedin;\n    e.preventDefault();\n\n    if (loggedin) {\n      const obj = getFromstorage('the_main_app'); // console.log(\"trying to logout\",obj);\n\n      if (obj && obj.token) {\n        const {\n          token\n        } = obj.token;\n        const j = {\n          userid: obj.token\n        }; // console.log('token for logout',j);\n\n        axios.get('http://localhost:4000/api/account/logout', {\n          params: {\n            userid: obj.token\n          }\n        }).then(res => res.data).then(data => {\n          // console.log('data',data);\n          if (data.success) {\n            setInStorage('the_main_app', {\n              token: ''\n            });\n            console.log(\"logged out\");\n            this.setState({\n              isLoading: false,\n              loggedin: false\n            });\n            alert('Logging out');\n            window.location.reload();\n          } else {\n            // console.log(\"didn't logout\");\n            this.setState({\n              isLoading: false,\n              loggedin: true\n            });\n          }\n        });\n      }\n    } else {\n      const User = {\n        username: this.state.username,\n        email: this.state.email,\n        password: this.state.password,\n        token: this.state.token,\n        role: this.state.role,\n        isLoading: false\n      }; // console.log(\"User:\",User);\n\n      axios.post('http://localhost:4000/api/account/signin', User).then(res => res.data).then(data => {\n        // console.log('json',data);\n        if (data.success) {\n          // console.log(\"suuuuuuuuuccccccceeeeesssssss\");\n          // setInStorage('the_main_app', { token: data.token });\n          axios.get('http://localhost:4000/api/account/getuser', {\n            params: {\n              token: data.token\n            }\n          }).then(res => res.data).then(data => {\n            setInStorage('the_main_app', {\n              token: data.token,\n              username: data.name,\n              role: data.role\n            }); // console.log('lol',data.token,data.name);\n          });\n          this.setState({\n            username: this.state.username,\n            email: this.state.email,\n            password: this.state.password,\n            role: data.role,\n            token: data.token,\n            isLoading: false,\n            loggedin: true\n          });\n\n          if (data.role == \"Customer\") {\n            alert('Logging in as a customer');\n            console.log(this.state); // this.props.history.push(\"/customer\");\n            // window.location.reload('/customer');\n          }\n\n          if (data.role == \"Vendor\") {\n            alert('Logging in as a vendor');\n            console.log(this.state); // this.props.history.push(\"/vendor\");\n            // window.location.reload('/vendor');\n            // return <Redirect to=\"/\" />\n          }\n        } else {\n          this.setState({\n            signinerror: 'Error',\n            loggedin: false\n          });\n        }\n\n        console.log(this.state);\n      });\n    }\n  }\n\n  render() {\n    const {\n      isLoading,\n      token,\n      loggedin\n    } = this.state;\n\n    if (loggedin) {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 191\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192\n        },\n        __self: this\n      }, \"Logged In...\"), React.createElement(\"form\", {\n        onSubmit: this.onSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 195\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 196\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"submit\",\n        value: \"LogOut\",\n        className: \"btn btn-primary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 197\n        },\n        __self: this\n      }))));\n    } // if(!token){\n    //     return (<div>\n    //         <p>Sign Up</p>\n    //     </div>);\n    // }\n\n\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210\n      },\n      __self: this\n    }, React.createElement(\"form\", {\n      onSubmit: this.onSubmit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213\n      },\n      __self: this\n    }, \"Email: \"), React.createElement(\"input\", {\n      type: \"email\",\n      className: \"form-control\",\n      value: this.state.email,\n      onChange: this.onChangeEmail,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 214\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 220\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221\n      },\n      __self: this\n    }, \"Password: \"), React.createElement(\"input\", {\n      type: \"password\",\n      className: \"form-control\",\n      value: this.state.password,\n      onChange: this.onChangePassword,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 222\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 228\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"submit\",\n      value: \"LogIn\",\n      className: \"btn btn-primary\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 229\n      },\n      __self: this\n    }))));\n  }\n\n}","map":{"version":3,"sources":["/home/sachin/sem-2-2/DASS/Assignments/A2/2018101108/frontend/src/components/log-in.component.js"],"names":["React","Component","axios","getFromstorage","setInStorage","Redirect","LogInUser","constructor","props","state","username","email","password","role","isLoading","signinerror","token","loggedin","onChangeEmail","bind","onChangePassword","onChangeToken","onSubmit","componentDidMount","obj","fetch","then","res","json","success","setState","console","log","event","target","value","e","preventDefault","j","userid","get","params","data","alert","window","location","reload","User","post","name","render"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport axios from 'axios';\n\nimport {\n    getFromstorage,\n    setInStorage,\n} from '../../src/utils/storage'\nimport { Redirect } from 'react-router-dom';\n\nexport default class LogInUser extends Component {\n    \n    constructor(props) {\n        super(props);\n\n        this.state = {\n            username: '',\n            email: '',\n            password: '',\n            role: '',\n            isLoading: true,\n            signinerror: '',\n            token: '',\n            loggedin: false\n        };\n\n        this.onChangeEmail = this.onChangeEmail.bind(this);\n        this.onChangePassword = this.onChangePassword.bind(this);\n        this.onChangeToken = this.onChangeToken.bind(this);\n        this.onSubmit = this.onSubmit.bind(this);\n    }\n\n    componentDidMount(){\n        const obj = getFromstorage('the_main_app');\n        // console.log(\"hell yeah!\",obj);\n        if(obj && obj.token) {\n            const { token } = obj.token;\n            //verify token\n            fetch('http://localhost:4000/api/account/verify?token=' + obj.token)\n            .then((res) => res.json())\n            .then(json => {\n                // console.log('json',json);\n                if(json.success){\n                    // console.log(\"is this even there?\");\n                    this.setState({\n                        token,\n                        isLoading: false,\n                        loggedin: true\n                    });\n                }\n                else{\n                    // console.log(\"this is not there!\");\n                    this.setState({\n                        isLoading: false,\n                        loggedin: false\n                    });\n                }\n            });\n        }\n        else {\n            this.setState({\n                isLoading: false,\n                loggedin: false \n            });\n        }\n        console.log(this.state);\n\n    }\n    \n\n    onChangeEmail(event) {\n        this.setState({ email: event.target.value });\n    }\n\n    onChangePassword(event) {\n        this.setState({ password: event.target.value });\n    }\n\n    onChangeToken(event) {\n        this.setState({ token: event.target.value });\n    }\n\n    onSubmit(e) {\n        const loggedin = this.state.loggedin\n        e.preventDefault();\n        if(loggedin){\n            const obj = getFromstorage('the_main_app');\n            // console.log(\"trying to logout\",obj);\n            if(obj && obj.token) {\n                const { token } = obj.token;\n                const j = {\n                    userid: obj.token\n                };\n                // console.log('token for logout',j);\n                axios.get('http://localhost:4000/api/account/logout', {\n                    params: {\n                        userid: obj.token\n                    }\n                }).then(res => res.data)\n                .then(data => {\n                    // console.log('data',data);\n                    if(data.success){\n                        setInStorage('the_main_app', { token: '' });\n                        console.log(\"logged out\");\n                        this.setState({\n                            isLoading: false,\n                            loggedin: false\n                        });\n                        alert('Logging out');\n                        window.location.reload()\n                    }\n                    else{\n                        // console.log(\"didn't logout\");\n                        this.setState({\n                            isLoading: false,\n                            loggedin: true\n                        });\n                    }\n                });\n            }\n        }\n        else{\n            const User = {\n                username: this.state.username,\n                email: this.state.email,\n                password: this.state.password,\n                token: this.state.token,\n                role: this.state.role,\n                isLoading: false\n            }\n            // console.log(\"User:\",User);\n            axios.post('http://localhost:4000/api/account/signin', User)\n            .then(res => res.data)\n            .then(data => {\n                // console.log('json',data);\n                if (data.success) {\n                    // console.log(\"suuuuuuuuuccccccceeeeesssssss\");\n                    // setInStorage('the_main_app', { token: data.token });\n                    axios.get('http://localhost:4000/api/account/getuser', {\n                        params : {\n                            token: data.token\n                        }\n                    })\n                    .then(res => res.data)\n                    .then(data => {\n                        setInStorage('the_main_app', { token: data.token, username:data.name, role:data.role });\n                        // console.log('lol',data.token,data.name);\n                    })\n                    this.setState({\n                        username: this.state.username,\n                        email: this.state.email,\n                        password: this.state.password,\n                        role: data.role,\n                        token: data.token,\n                        isLoading: false,\n                        loggedin: true,\n                    });\n                    if(data.role == \"Customer\"){\n                        alert('Logging in as a customer');\n                        console.log(this.state);\n                        // this.props.history.push(\"/customer\");\n                        // window.location.reload('/customer');\n                    }\n                    if(data.role == \"Vendor\"){\n                        alert('Logging in as a vendor');\n                        console.log(this.state);\n                        // this.props.history.push(\"/vendor\");\n                        // window.location.reload('/vendor');\n                        // return <Redirect to=\"/\" />\n                    }\n                }   \n                else {\n                    this.setState({\n                        signinerror: 'Error',\n                        loggedin: false\n                });\n            }\n            console.log(this.state);\n        });\n        }\n    }\n\n\n    render() {\n        const {\n            isLoading,\n            token,\n            loggedin\n        } = this.state;\n\n        if (loggedin) {\n            return (<div>\n                <p>\n                   Logged In...\n                </p>\n                <form onSubmit={this.onSubmit}>\n                <div className=\"form-group\">\n                        <input type=\"submit\" value=\"LogOut\" className=\"btn btn-primary\"/>\n                    </div>\n                </form>\n                </div>);\n        }\n\n        // if(!token){\n        //     return (<div>\n        //         <p>Sign Up</p>\n        //     </div>);\n        // }\n\n        return (\n            <div>\n                <form onSubmit={this.onSubmit}>\n                    <div className=\"form-group\">\n                        <label>Email: </label>\n                        <input type=\"email\" \n                               className=\"form-control\" \n                               value={this.state.email}\n                               onChange={this.onChangeEmail}\n                               />  \n                    </div>\n                    <div className=\"form-group\">\n                        <label>Password: </label>\n                        <input type=\"password\" \n                               className=\"form-control\" \n                               value={this.state.password}\n                               onChange={this.onChangePassword}\n                               />  \n                    </div>\n                    <div className=\"form-group\">\n                        <input type=\"submit\" value=\"LogIn\" className=\"btn btn-primary\"/>\n                    </div>\n                </form>\n            </div>\n        )\n    }\n}"]},"metadata":{},"sourceType":"module"}